"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var semver = require("semver");
var exceptions_1 = require("./exceptions");
var nodeVersion = semver.clean(process.version);
var MoneyUtils = (function () {
    function MoneyUtils() {
    }
    MoneyUtils.toTRY = function (amount) {
        var formatted;
        if (semver.lt(nodeVersion, "4.0.0")) {
            formatted = (Math.round(amount * 100) / 100).toString();
            var split = formatted.split(".");
            if (split.length === 1 || split[1].length < 1) {
                split[1] = "00";
            }
            else if (split[1].length < 2) {
                split[1] = split[1] + "0";
            }
            formatted = split.join(",");
        }
        else {
            formatted = amount.toLocaleString("tr-TR", { style: "currency", currency: "TRY", currencyDisplay: "code" });
            formatted = formatted.replace(/TRY|,|\s+/gi, "");
            formatted = formatted.replace(/\./i, ",");
        }
        return MoneyUtils.validate(formatted);
    };
    MoneyUtils.toNumber = function (amount) {
        var formatted = MoneyUtils.validate(amount).replace(",", ".");
        formatted = formatted.replace(/[^\d\.]/i, "");
        return parseFloat(formatted);
    };
    MoneyUtils.validate = function (amount) {
        var split = amount.split(",");
        if (amount.indexOf(".") > -1 || split.length !== 2 || split[1].length !== 2) {
            throw new exceptions_1.MoneyUtilException("Input validation error.");
        }
        return amount;
    };
    return MoneyUtils;
}());
exports.MoneyUtils = MoneyUtils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9uZXlVdGlscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tb25leVV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBTUEsK0JBQWlDO0FBQ2pDLDJDQUFnRDtBQUNoRCxJQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUVsRDtJQUFBO0lBbUNBLENBQUM7SUFsQ2lCLGdCQUFLLEdBQW5CLFVBQW9CLE1BQWM7UUFDOUIsSUFBSSxTQUFpQixDQUFDO1FBQ3RCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxTQUFTLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUN4RCxJQUFNLEtBQUssR0FBYSxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzdDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDNUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUNwQixDQUFDO1lBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDM0IsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDOUIsQ0FBQztZQUNELFNBQVMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFDRCxJQUFJLENBQUMsQ0FBQztZQUNGLFNBQVMsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxFQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztZQUMxRyxTQUFTLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDakQsU0FBUyxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzlDLENBQUM7UUFDRCxNQUFNLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRWEsbUJBQVEsR0FBdEIsVUFBdUIsTUFBYztRQUNqQyxJQUFJLFNBQVMsR0FBVyxVQUFVLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDdEUsU0FBUyxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzlDLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVhLG1CQUFRLEdBQXRCLFVBQXVCLE1BQWM7UUFDakMsSUFBTSxLQUFLLEdBQWEsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxRSxNQUFNLElBQUksK0JBQWtCLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUM1RCxDQUFDO1FBQ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBQ0wsaUJBQUM7QUFBRCxDQUFDLEFBbkNELElBbUNDO0FBbkNZLGdDQUFVIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yICBUw7xtYXkgw4dlYmVyIDx0dW1heWNlYmVyQGdtYWlsLmNvbT5cbiAqIEBsaW5rICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9icmVuZHR1bWkvYmttZXhwcmVzc1xuICogQGxpY2Vuc2UgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICogQGRhdGUgMjguMDQuMjAxN1xuICovXG5pbXBvcnQgKiBhcyBzZW12ZXIgZnJvbSBcInNlbXZlclwiO1xuaW1wb3J0IHtNb25leVV0aWxFeGNlcHRpb259IGZyb20gXCIuL2V4Y2VwdGlvbnNcIjtcbmNvbnN0IG5vZGVWZXJzaW9uID0gc2VtdmVyLmNsZWFuKHByb2Nlc3MudmVyc2lvbik7XG5cbmV4cG9ydCBjbGFzcyBNb25leVV0aWxzIHtcbiAgICBwdWJsaWMgc3RhdGljIHRvVFJZKGFtb3VudDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGZvcm1hdHRlZDogc3RyaW5nO1xuICAgICAgICBpZiAoc2VtdmVyLmx0KG5vZGVWZXJzaW9uLCBcIjQuMC4wXCIpKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWQgPSAoTWF0aC5yb3VuZChhbW91bnQgKiAxMDApIC8gMTAwKS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3Qgc3BsaXQ6IHN0cmluZ1tdID0gZm9ybWF0dGVkLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIGlmIChzcGxpdC5sZW5ndGggPT09IDEgfHwgc3BsaXRbMV0ubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIHNwbGl0WzFdID0gXCIwMFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3BsaXRbMV0ubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgIHNwbGl0WzFdID0gc3BsaXRbMV0gKyBcIjBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcm1hdHRlZCA9IHNwbGl0LmpvaW4oXCIsXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9ybWF0dGVkID0gYW1vdW50LnRvTG9jYWxlU3RyaW5nKFwidHItVFJcIiwge3N0eWxlOiBcImN1cnJlbmN5XCIsIGN1cnJlbmN5OiBcIlRSWVwiLCBjdXJyZW5jeURpc3BsYXk6IFwiY29kZVwifSk7XG4gICAgICAgICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZSgvVFJZfCx8XFxzKy9naSwgXCJcIik7XG4gICAgICAgICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZSgvXFwuL2ksIFwiLFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTW9uZXlVdGlscy52YWxpZGF0ZShmb3JtYXR0ZWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdG9OdW1iZXIoYW1vdW50OiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgICBsZXQgZm9ybWF0dGVkOiBzdHJpbmcgPSBNb25leVV0aWxzLnZhbGlkYXRlKGFtb3VudCkucmVwbGFjZShcIixcIiwgXCIuXCIpO1xuICAgICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZSgvW15cXGRcXC5dL2ksIFwiXCIpO1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChmb3JtYXR0ZWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdmFsaWRhdGUoYW1vdW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzcGxpdDogc3RyaW5nW10gPSBhbW91bnQuc3BsaXQoXCIsXCIpO1xuICAgICAgICBpZiAoYW1vdW50LmluZGV4T2YoXCIuXCIpID4gLTEgfHwgc3BsaXQubGVuZ3RoICE9PSAyIHx8IHNwbGl0WzFdLmxlbmd0aCAhPT0gMikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vbmV5VXRpbEV4Y2VwdGlvbihcIklucHV0IHZhbGlkYXRpb24gZXJyb3IuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbW91bnQ7XG4gICAgfVxufSJdfQ==